(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21e866cc"],{"0cb2":function(e,t,n){var a=n("e330"),r=n("7b0b"),c=Math.floor,o=a("".charAt),i=a("".replace),s=a("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,a,d,b){var f=n+e.length,m=a.length,p=l;return void 0!==d&&(d=r(d),p=u),i(b,p,(function(r,i){var u;switch(o(i,0)){case"$":return"$";case"&":return e;case"`":return s(t,0,n);case"'":return s(t,f);case"<":u=d[s(i,1,-1)];break;default:var l=+i;if(0===l)return r;if(l>m){var b=c(l/10);return 0===b?r:b<=m?void 0===a[b-1]?o(i,1):a[b-1]+o(i,1):r}u=a[l-1]}return void 0===u?"":u}))}},1148:function(e,t,n){"use strict";var a=n("da84"),r=n("5926"),c=n("577e"),o=n("1d80"),i=a.RangeError;e.exports=function(e){var t=c(o(this)),n="",a=r(e);if(a<0||a==1/0)throw i("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},"14c3":function(e,t,n){var a=n("da84"),r=n("c65b"),c=n("825a"),o=n("1626"),i=n("c6b6"),s=n("9263"),u=a.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var a=r(n,e,t);return null!==a&&c(a),a}if("RegExp"===i(e))return r(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},1735:function(e,t,n){},2532:function(e,t,n){"use strict";var a=n("23e7"),r=n("e330"),c=n("5a34"),o=n("1d80"),i=n("577e"),s=n("ab13"),u=r("".indexOf);a({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~u(i(o(this)),i(c(e)),arguments.length>1?arguments[1]:void 0)}})},"408a":function(e,t,n){var a=n("e330");e.exports=a(1..valueOf)},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),c=n("b622"),o=c("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},5319:function(e,t,n){"use strict";var a=n("2ba4"),r=n("c65b"),c=n("e330"),o=n("d784"),i=n("d039"),s=n("825a"),u=n("1626"),l=n("5926"),d=n("50c4"),b=n("577e"),f=n("1d80"),m=n("8aa5"),p=n("dc4a"),h=n("0cb2"),g=n("14c3"),v=n("b622"),j=v("replace"),O=Math.max,k=Math.min,w=c([].concat),x=c([].push),y=c("".indexOf),E=c("".slice),I=function(e){return void 0===e?e:String(e)},C=function(){return"$0"==="a".replace(/./,"$0")}(),M=function(){return!!/./[j]&&""===/./[j]("a","$0")}(),T=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var c=M?"$":"$0";return[function(e,n){var a=f(this),c=void 0==e?void 0:p(e,j);return c?r(c,e,a,n):r(t,b(a),e,n)},function(e,r){var o=s(this),i=b(e);if("string"==typeof r&&-1===y(r,c)&&-1===y(r,"$<")){var f=n(t,o,i,r);if(f.done)return f.value}var p=u(r);p||(r=b(r));var v=o.global;if(v){var j=o.unicode;o.lastIndex=0}var C=[];while(1){var M=g(o,i);if(null===M)break;if(x(C,M),!v)break;var T=b(M[0]);""===T&&(o.lastIndex=m(i,d(o.lastIndex),j))}for(var $="",A=0,S=0;S<C.length;S++){M=C[S];for(var R=b(M[0]),G=O(k(l(M.index),i.length),0),J=[],_=1;_<M.length;_++)x(J,I(M[_]));var D=M.groups;if(p){var F=w([R],J,G,i);void 0!==D&&x(F,D);var B=b(a(r,void 0,F))}else B=h(R,i,G,J,D,r);G>=A&&($+=E(i,A,G)+B,A=G+R.length)}return $+E(i,A)}]}),!T||!C||M)},"5a34":function(e,t,n){var a=n("da84"),r=n("44e7"),c=a.TypeError;e.exports=function(e){if(r(e))throw c("The method doesn't accept regular expressions");return e}},"5ef3":function(e,t,n){},"7db0":function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").find,c=n("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a({target:"Array",proto:!0,forced:i},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(o)},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},"916a":function(e,t,n){"use strict";n("1735")},a79f:function(e,t,n){"use strict";n("db0d")},aa14:function(e,t,n){"use strict";n("5ef3")},ab13:function(e,t,n){var a=n("b622"),r=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(a){}}return!1}},b680:function(e,t,n){"use strict";var a=n("23e7"),r=n("da84"),c=n("e330"),o=n("5926"),i=n("408a"),s=n("1148"),u=n("d039"),l=r.RangeError,d=r.String,b=Math.floor,f=c(s),m=c("".slice),p=c(1..toFixed),h=function(e,t,n){return 0===t?n:t%2===1?h(e,t-1,n*e):h(e*e,t/2,n)},g=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},v=function(e,t,n){var a=-1,r=n;while(++a<6)r+=t*e[a],e[a]=r%1e7,r=b(r/1e7)},j=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=b(a/t),a=a%t*1e7},O=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=d(e[t]);n=""===n?a:n+f("0",7-a.length)+a}return n},k=u((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!u((function(){p({})}));a({target:"Number",proto:!0,forced:k},{toFixed:function(e){var t,n,a,r,c=i(this),s=o(e),u=[0,0,0,0,0,0],b="",p="0";if(s<0||s>20)throw l("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return d(c);if(c<0&&(b="-",c=-c),c>1e-21)if(t=g(c*h(2,69,1))-69,n=t<0?c*h(2,-t,1):c/h(2,t,1),n*=4503599627370496,t=52-t,t>0){v(u,0,n),a=s;while(a>=7)v(u,1e7,0),a-=7;v(u,h(10,a,1),0),a=t-1;while(a>=23)j(u,1<<23),a-=23;j(u,1<<a),v(u,1,1),j(u,2),p=O(u)}else v(u,0,n),v(u,1<<-t,0),p=O(u)+f("0",s);return s>0?(r=p.length,p=b+(r<=s?"0."+f("0",s-r)+p:m(p,0,r-s)+"."+m(p,r-s))):p=b+p,p}})},b74e:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n("1da1"),r=n("3835");n("96cf"),n("d3b7"),n("159b"),n("4fad"),n("c1f9"),n("4de4"),n("caad"),n("2532"),n("ac1f"),n("00b4");function c(e,t){var n=!0;return Object.entries(e).forEach((function(e){var a=Object(r["a"])(e,2),c=a[0],o=a[1];null!=o&&""!=o||(t[c]="Este campo es obligatorio",n=!1)})),n}function o(e,t){var n=Object.fromEntries(Object.entries(t).filter((function(t){var n=Object(r["a"])(t,1),a=n[0];return e.includes(a)})));return n}function i(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}function s(e){var t=/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{10,}$/;return t.test(e)}function u(e){var t=/^(?=.{9})(?!.{16})\+?\d+(-\d+)*$/;return t.test(e)}function l(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,t.text();case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},b7ff:function(e,t,n){"use strict";var a=n("7a23"),r=function(e){return Object(a["J"])("data-v-ea440b04"),e=e(),Object(a["H"])(),e},c={key:0,class:"modal"},o=r((function(){return Object(a["m"])("i",{class:"far fa-times-circle fa-2x"},null,-1)})),i={class:"flex-button"};function s(e,t,n,r,s,u){var l=Object(a["O"])("backdrop");return Object(a["G"])(),Object(a["l"])(a["b"],null,[Object(a["p"])(l,{show:e.show,onClose:e.tryClose,closable:!1},null,8,["show","onClose"]),e.show?(Object(a["G"])(),Object(a["l"])("div",c,[o,Object(a["m"])("p",null,Object(a["Q"])(e.title),1),Object(a["m"])("div",i,[Object(a["m"])("button",{onClick:t[0]||(t[0]=function(t){return e.confirm()}),class:"action-button"},"Aceptar"),Object(a["m"])("button",{style:{background:"var(--danger)"},onClick:t[1]||(t[1]=function(t){return e.cancel()}),class:"action-button"}," Cancelar ")])])):Object(a["k"])("",!0)],64)}var u=n("5c40"),l=n("c2de"),d=Object(u["s"])({components:{Backdrop:l["a"]},props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},massiveDelete:{type:Boolean,required:!1}},emits:["confirmMassive","close","confirm","cancel"],methods:{tryClose:function(){this.$emit("close")},confirm:function(){this.massiveDelete?this.$emit("confirmMassive"):this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}}),b=(n("aa14"),n("6b0d")),f=n.n(b);const m=f()(d,[["render",s],["__scopeId","data-v-ea440b04"]]);t["a"]=m},c1f9:function(e,t,n){var a=n("23e7"),r=n("2266"),c=n("8418");a({target:"Object",stat:!0},{fromEntries:function(e){var t={};return r(e,(function(e,n){c(t,e,n)}),{AS_ENTRIES:!0}),t}})},caad:function(e,t,n){"use strict";var a=n("23e7"),r=n("4d64").includes,c=n("44d2");a({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c("includes")},d2a7:function(e,t,n){"use strict";n.r(t);n("b680");var a=n("7a23"),r=n("1d35"),c=n.n(r),o=n("c3e0"),i=n.n(o),s=n("ba97"),u=n.n(s),l=function(e){return Object(a["J"])("data-v-2c408c14"),e=e(),Object(a["H"])(),e},d={id:"main"},b={class:"grid-container"},f={class:"grid-item"},m=l((function(){return Object(a["m"])("h4",null,"Código de tratamiento:",-1)})),p=l((function(){return Object(a["m"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1)})),h={key:0},g=["placeholder"],v={class:"grid-item"},j=l((function(){return Object(a["m"])("h4",null,"Código de evaluación:",-1)})),O=l((function(){return Object(a["m"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1)})),k={key:0},w={style:{position:"absolute"}},x=["onClick"],y={key:2,class:"error"},E={class:"grid-item"},I=l((function(){return Object(a["m"])("h4",null,"Código de prueba:",-1)})),C=l((function(){return Object(a["m"])("img",{src:c.a,alt:"codeva",class:"imgIcon"},null,-1)})),M={key:0},T={class:"grid-item"},$=l((function(){return Object(a["m"])("h4",null,"Nombre del plan de tratamiento:",-1)})),A=l((function(){return Object(a["m"])("img",{src:i.a,alt:"codeva",class:"imgIcon"},null,-1)})),S={key:0},R={key:2,class:"error"},G={class:"grid-item"},J=l((function(){return Object(a["m"])("h4",null,"Responsable:",-1)})),_=l((function(){return Object(a["m"])("img",{src:u.a,alt:"codeva",class:"imgIcon"},null,-1)})),D={key:0},F=["value"],B={class:"grid-item",style:{"margin-top":"50px"}},Q={key:1,id:"acciones-mitigacion"},L=l((function(){return Object(a["m"])("h4",null,"Acciones de mitigación",-1)})),V=l((function(){return Object(a["m"])("br",null,null,-1)})),z={key:0,class:"flex-row table-options"},N=Object(a["o"])("   "),P={class:"grid"},H={class:"header-grid"},q={key:0},U=l((function(){return Object(a["m"])("th",{style:{width:"60%"}},"Acciones de mitigación",-1)})),Z=l((function(){return Object(a["m"])("th",{style:{width:"12.5%"}},"Fecha de inicio",-1)})),K=l((function(){return Object(a["m"])("th",{style:{width:"12.5%"}},"Fecha de fin",-1)})),W={key:1},X={key:2},Y=l((function(){return Object(a["m"])("th",{style:{width:"15%"}},"Estado",-1)})),ee={key:0},te=["id","value"],ne={style:{width:"60%","text-align":"left"}},ae={key:0,style:{width:"90%"}},re=["onUpdate:modelValue"],ce={key:2,class:"far fa-envelope"},oe={style:{width:"12.5%"}},ie={key:0},se=["onChange","value"],ue={style:{width:"12.5%"}},le={key:0},de=["onChange","value"],be=["onClick"],fe=l((function(){return Object(a["m"])("i",{class:"fas fa-edit"},null,-1)})),me=[fe],pe=["onClick"],he=l((function(){return Object(a["m"])("i",{class:"fas fa-trash-alt",style:{color:"red"}},null,-1)})),ge=[he],ve={style:{width:"15%"}};function je(e,t,n,r,c,o){var i,s,u,l,fe=Object(a["O"])("nav-bar"),he=Object(a["O"])("confirmation-modal"),je=Object(a["O"])("modal");return Object(a["G"])(),Object(a["l"])(a["b"],null,[Object(a["p"])(fe,{name:null===(i=e.userInfoJson)||void 0===i?void 0:i.nombres,lastName:null===(s=e.userInfoJson)||void 0===s?void 0:s.apellidos},null,8,["name","lastName"]),Object(a["p"])(he,{error:null,show:e.showModalConfirmation,title:e.modalTitle,massiveDelete:e.massiveDelete,onConfirm:e.deleteAccion,onConfirmMassive:e.confirmMassiveDelete,onCancel:e.closeModal},null,8,["show","title","massiveDelete","onConfirm","onConfirmMassive","onCancel"]),Object(a["p"])(je,{show:!!e.message,title:e.message,onClose:e.handleError,error:e.error,loading:e.loading},null,8,["show","title","onClose","error","loading"]),Object(a["m"])("section",d,[Object(a["m"])("h1",null,Object(a["Q"])(e.displayTitlePage),1),100!=e.tratamientoInfoJson.porcentajeAvance||e.esAgricultor?Object(a["k"])("",!0):(Object(a["G"])(),Object(a["l"])("button",{key:0,class:"action-button",style:{top:"140px"},onClick:t[0]||(t[0]=function(t){return e.register()})}," Generar informe ")),Object(a["m"])("div",b,[Object(a["m"])("div",f,[m,p,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",h,Object(a["Q"])(e.tratamientoInfoJson.codigo),1)):Object(a["k"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["k"])("",!0):(Object(a["G"])(),Object(a["l"])("input",{key:1,type:"text",disabled:"true",placeholder:e.tratamientoInfoJson.codigo},null,8,g))]),Object(a["m"])("div",v,[j,O,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",k,Object(a["Q"])(e.codigoEvaluacion),1)):Object(a["k"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["k"])("",!0):Object(a["ab"])((Object(a["G"])(),Object(a["l"])("input",{key:1,type:"text",placeholder:"Buscar por código",onKeyup:t[1]||(t[1]=function(){return e.searchCodigoEvaluacion&&e.searchCodigoEvaluacion.apply(e,arguments)}),"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.codigoEvaluacion=t})},null,544)),[[a["V"],e.codigoEvaluacion,void 0,{trim:!0}]]),Object(a["m"])("div",w,[(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.evaluacionList,(function(t){return Object(a["G"])(),Object(a["l"])("p",{class:"dropdownSelect",key:t.evaluacionId,onClick:function(n){return e.selectEvaluacion(t)}},Object(a["Q"])(t.codigo+"-"+t.nombre),9,x)})),128))]),e.validationForm.evaluacionId?(Object(a["G"])(),Object(a["l"])("p",y,Object(a["Q"])(e.validationForm.evaluacionId),1)):Object(a["k"])("",!0)]),Object(a["m"])("div",E,[I,C,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",M,Object(a["Q"])(e.codigoPrueba),1)):Object(a["k"])("",!0)]),Object(a["m"])("div",T,[$,A,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",S,Object(a["Q"])(e.tratamientoInfoJson.nombre),1)):Object(a["k"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["k"])("",!0):Object(a["ab"])((Object(a["G"])(),Object(a["l"])("input",{key:1,type:"text",placeholder:"Plan de tratamiento-nombre","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.tratamientoInfoJson.nombre=t})},null,512)),[[a["V"],e.tratamientoInfoJson.nombre,void 0,{trim:!0}]]),e.validationForm.nombre?(Object(a["G"])(),Object(a["l"])("p",R,Object(a["Q"])(e.validationForm.nombre),1)):Object(a["k"])("",!0)]),Object(a["m"])("div",G,[J,_,e.$route.params.tr_codigo&&!e.canEdit||e.$route.params.tr_codigo&&e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",D,Object(a["Q"])(e.analistaCalc()),1)):Object(a["k"])("",!0),!e.update&&e.$route.params.tr_codigo||!e.canEdit?Object(a["k"])("",!0):Object(a["ab"])((Object(a["G"])(),Object(a["l"])("select",{key:1,class:"select","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tratamientoInfoJson.usuarioId=t}),name:"analista"},[(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.analistaList,(function(e){return Object(a["G"])(),Object(a["l"])("option",{key:e.usuarioId,value:e.usuarioId},Object(a["Q"])(e.codigo+"-"+e.nombres+" "+e.apellidos),9,F)})),128))],512)),[[a["U"],e.tratamientoInfoJson.usuarioId]])]),Object(a["m"])("div",B,[Object(a["m"])("h4",null,[Object(a["m"])("strong",null,"Porcentaje de avance: "+Object(a["Q"])(null===(u=e.tratamientoInfoJson)||void 0===u||null===(l=u.porcentajeAvance)||void 0===l?void 0:l.toFixed(2))+" %",1)])])]),e.showAccionesMitigacion?(Object(a["G"])(),Object(a["l"])("section",Q,[L,V,e.update&&e.canEdit?(Object(a["G"])(),Object(a["l"])("div",z,[Object(a["m"])("div",null,[Object(a["m"])("i",{class:"fas fa-plus-circle",onClick:t[5]||(t[5]=function(){return e.goToTestSummary&&e.goToTestSummary.apply(e,arguments)})}),N,Object(a["m"])("span",{style:{"text-decoration":"underline",cursor:"pointer"},onClick:t[6]||(t[6]=function(){return e.goToTestSummary&&e.goToTestSummary.apply(e,arguments)})},"Añadir nueva acción")]),Object(a["m"])("div",null,[Object(a["m"])("button",{class:"action-button table",onClick:t[7]||(t[7]=function(t){return e.deleteMassive()})}," Eliminación massiva ")])])):Object(a["k"])("",!0),Object(a["m"])("table",P,[Object(a["m"])("thead",H,[Object(a["m"])("tr",null,[e.update&&e.accionesMitigacion.length>0&&e.canEdit?(Object(a["G"])(),Object(a["l"])("th",q,[Object(a["ab"])(Object(a["m"])("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.massiveCheck=t})},null,512),[[a["S"],e.massiveCheck]])])):Object(a["k"])("",!0),U,Z,K,e.update?(Object(a["G"])(),Object(a["l"])("th",W)):Object(a["k"])("",!0),e.update&&e.canEdit?(Object(a["G"])(),Object(a["l"])("th",X)):Object(a["k"])("",!0),Y])]),Object(a["m"])("tbody",null,[(Object(a["G"])(!0),Object(a["l"])(a["b"],null,Object(a["M"])(e.accionesMitigacion,(function(n){return Object(a["G"])(),Object(a["l"])("tr",{key:n.accionMitigacionId},[e.update&&e.canEdit?(Object(a["G"])(),Object(a["l"])("td",ee,[Object(a["ab"])(Object(a["m"])("input",{type:"checkbox",id:n.accionMitigacionId,value:n.accionMitigacionId,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.checkedEntities=t})},null,8,te),[[a["S"],e.checkedEntities]])])):Object(a["k"])("",!0),Object(a["m"])("td",ne,[Object(a["m"])("div",null,[e.$route.params.tr_codigo&&!e.canEdit||e.canEdit&&!e.update?(Object(a["G"])(),Object(a["l"])("span",ae,Object(a["Q"])(n.descripcion),1)):Object(a["k"])("",!0),e.update&&e.canEdit?Object(a["ab"])((Object(a["G"])(),Object(a["l"])("input",{key:1,type:"text",style:{width:"90%","margin-left":"5px"},"onUpdate:modelValue":function(e){return n.descripcion=e}},null,8,re)),[[a["V"],n.descripcion]]):Object(a["k"])("",!0),n.tieneMensaje?(Object(a["G"])(),Object(a["l"])("i",ce)):Object(a["k"])("",!0)])]),Object(a["m"])("td",oe,[e.$route.params.tr_codigo&&!e.update?(Object(a["G"])(),Object(a["l"])("span",ie,Object(a["Q"])(n.fechaInicio?new Date(n.fechaInicio).toISOString().substr(0,10):(new Date).toISOString().substr(0,10)),1)):Object(a["k"])("",!0),e.update?(Object(a["G"])(),Object(a["l"])("input",{key:1,type:"date",onChange:function(e){return n.fechaInicio=e.target.value},value:e.userInfoJson&&n.fechaInicio?new Date(n.fechaInicio).toISOString().substr(0,10):null},null,40,se)):Object(a["k"])("",!0)]),Object(a["m"])("td",ue,[e.$route.params.tr_codigo&&!e.update?(Object(a["G"])(),Object(a["l"])("span",le,Object(a["Q"])(n.fechaFin?new Date(n.fechaFin).toISOString().substr(0,10):(new Date).toISOString().substr(0,10)),1)):Object(a["k"])("",!0),e.update?(Object(a["G"])(),Object(a["l"])("input",{key:1,type:"date",onChange:function(e){return n.fechaFin=e.target.value},value:e.userInfoJson&&n.fechaFin?new Date(n.fechaFin).toISOString().substr(0,10):null},null,40,de)):Object(a["k"])("",!0)]),e.update?(Object(a["G"])(),Object(a["l"])("td",{key:1,onClick:function(t){return e.editAccion(n)}},me,8,be)):Object(a["k"])("",!0),e.update&&e.canEdit?(Object(a["G"])(),Object(a["l"])("td",{key:2,onClick:function(t){return e.deleteConfirm(n)}},ge,8,pe)):Object(a["k"])("",!0),Object(a["m"])("td",ve,[Object(a["m"])("p",{class:Object(a["x"])(n.estado?"label success":"label error")},Object(a["Q"])(n.estado?"Terminado":"En Proceso"),3)])])})),128))])])])):Object(a["k"])("",!0)])],64)}var Oe=n("5530"),ke=n("1da1"),we=(n("d81d"),n("7db0"),n("d3b7"),n("99af"),n("e9c4"),n("ac1f"),n("5319"),n("b64b"),n("4de4"),n("96cf"),n("705f")),xe=n("f50d"),ye=n("d43e"),Ee=n("5c40"),Ie=n("f464"),Ce=n("b74e"),Me=n("2fc2"),Te=n("b7ff"),$e=Object(Ee["s"])({components:{NavBar:Ie["a"],ConfirmationModal:Te["a"],Modal:we["a"]},computed:{evaluacion:function(){return this.$store.getters["evaluacionModule/obtenerEvaluacion"]},displayButtonText:function(){return this.$route.params.tr_codigo?this.update?"Guardar":"Editar":"Registrar"},displayTitlePage:function(){return this.$route.params.tr_codigo&&this.update?"Editar plan de tratamiento":"Visualizar plan de tratamiento"}},data:function(){return{userInfoJson:Object(ye["p"])(),codigoEvaluacion:"",codigoPrueba:"",codigoListaVerificacion:"",timeout:void 0,evaluacionList:[],analistaList:[],pruebas:[],showAccionesMitigacion:!1,validationForm:{},tratamientoInfoJson:Object(ye["g"])(),massiveCheck:!1,checkedEntities:[],accionesMitigacion:[],accionSelected:"",esAgricultor:!1,message:null,loading:!1,error:!1,update:!1,modalTitle:"",showModalConfirmation:!1,massiveDelete:!1,canEdit:!1}},watch:{codigoPrueba:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.tr_codigo){t.next=3;break}return t.next=3,e.fetchAccionesMitigacion();case 3:case"end":return t.stop()}}),t)})))()},massiveCheck:function(){this.massiveCheck?this.checkedEntities=this.accionesMitigacion.map((function(e){return e.accionMitigacionId})):this.checkedEntities=[]}},methods:{analistaCalc:function(){var e=this,t=this.analistaList.find((function(t){return t.usuarioId==e.tratamientoInfoJson.usuarioId}));return t?t.codigo+"-"+t.nombres+" "+t.apellidos:""},handleError:function(){this.message=null},closeModal:function(){this.showModalConfirmation=!1},searchCodigoEvaluacion:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvaluacion();case 2:case"end":return t.stop()}}),t)}))),1e3)},fetchEvaluacion:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Me["b"],"evaluacion/lista?filter=").concat(e.codigoEvaluacion),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.evaluacionList=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchAnalista:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Me["b"],"usuario/lista/Analistas"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.analistaList=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},selectEvaluacion:function(e){this.tratamientoInfoJson.evaluacionId=e.evaluacionId,this.evaluacionList=[],this.codigoEvaluacion=e.codigo+"-"+e.nombre,this.pruebas=e.pruebaList},deleteConfirm:function(e){this.accionSelected=e.accionMitigacionId,this.modalTitle="Está seguro que desea eliminar la acción de mitigación?",this.showModalConfirmation=!0},deleteMassive:function(){this.checkedEntities.length>0?(this.massiveDelete=!0,this.showModalConfirmation=!0,this.modalTitle="Está seguro que desea eliminar las acciones de mitigación seleccionadas ?"):(this.message="Debe seleccionar al menos una acción de mitigación",this.error=!0)},register:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){var n,a,r,c,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$route.params.tr_codigo||e.update){t.next=3;break}return e.update=!0,t.abrupt("return");case 3:if(e.validationForm={},n=["evaluacionId","nombre"],a=Object(Ce["b"])(n,e.tratamientoInfoJson),r=Object(Ce["d"])(a,e.validationForm),console.log(r),console.log(e.tratamientoInfoJson),!r){t.next=49;break}if(e.$route.params.tr_codigo){t.next=33;break}return t.prev=11,t.next=14,fetch("".concat(Me["b"],"plantratamiento"),{method:"POST",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(e.tratamientoInfoJson)});case 14:return c=t.sent,t.next=17,Object(Ce["a"])(c);case 17:return t.next=19,c.json();case 19:o=t.sent,e.$router.replace("/plan-tratamiento2/".concat(o.codigo)),e.showAccionesMitigacion=!0,e.loading=!1,e.error=!1,e.message="¡El plan de tratamiento ha sido registrado exitósamente!",setTimeout(Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="",t.next=3,e.fetchTratamiento();case 3:case"end":return t.stop()}}),t)}))),1500),t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](11),console.log(t.t0);case 31:t.next=49;break;case 33:return i=Object(Oe["a"])(Object(Oe["a"])({},e.tratamientoInfoJson),{},{AccionMitigacionList:e.accionesMitigacion}),t.prev=34,t.next=37,fetch("".concat(Me["b"],"plantratamiento/").concat(e.$route.params.tr_codigo),{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}),body:JSON.stringify(i)});case 37:return s=t.sent,t.next=40,Object(Ce["a"])(s);case 40:e.loading=!1,e.error=!1,e.message="¡El plan de tratamiento ha sido actualizado exitósamente!",setTimeout(Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.message="";case 1:case"end":return t.stop()}}),t)}))),1500),t.next=49;break;case 46:t.prev=46,t.t1=t["catch"](34),console.log(t.t1);case 49:case"end":return t.stop()}}),t,null,[[11,28],[34,46]])})))()},goToTestSummary:function(){this.$router.push("/lista-verificacion/".concat(this.codigoListaVerificacion,"/prueba/").concat(this.codigoPrueba,"/resumen"))},fetchTratamiento:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Me["b"],"plantratamiento/").concat(e.$route.params.tr_codigo),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,r=Object.keys(e.tratamientoInfoJson),e.tratamientoInfoJson=Object(Ce["b"])(r,a),e.codigoEvaluacion=a.codigoEvaluacion,e.pruebas=a.pruebas.filter((function(e){return e.visibilidad})),e.codigoPrueba=e.pruebas[0].codigo,e.codigoListaVerificacion=a.listaVerificacionCodigo,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},fetchAccionesMitigacion:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Me["b"],"accionmitigacion/").concat(e.tratamientoInfoJson.tratamientoId,"/").concat(e.codigoPrueba),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.accionesMitigacion=t.sent,e.accionesMitigacion.length>0?(a=e.accionesMitigacion.length,r=e.accionesMitigacion.filter((function(e){return 1==e.estado})).length,e.tratamientoInfoJson.porcentajeAvance=r/a*100):e.tratamientoInfoJson.porcentajeAvance=0,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},editAccion:function(e){var t=this;return Object(ke["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$router.push("/accion-mitigacion/edicion/".concat(e.accionMitigacionId));case 1:case"end":return n.stop()}}),n)})))()},deleteAccion:function(e){var t=this;return Object(ke["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.closeModal(),a=e||t.accionSelected,n.prev=2,n.next=5,fetch("".concat(Me["b"],"accionmitigacion/").concat(a),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 5:return r=n.sent,n.next=8,Object(Ce["a"])(r);case 8:e||(t.message="¡Se ha eliminado accion exitósamente!",setTimeout(Object(ke["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.message="",e.next=3,t.fetchAccionesMitigacion();case 3:case"end":return e.stop()}}),e)}))),1500)),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},confirmMassiveDelete:function(){var e=this;return Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.checkedEntities.map(function(){var t=Object(ke["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deleteAccion(n);case 3:a=t.sent,console.log(a),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),e.massiveDelete=!1,e.showModalConfirmation=!1,e.modalTitle="",e.message="¡Se ha eliminado las acciones de mitigacion exitósamente!",setTimeout(Object(ke["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAccionesMitigacion();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3);case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;Object(ke["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(xe["a"])();case 2:return e.userInfoJson=t.sent,e.userInfoJson.rol==Me["q"].JEFE_DE_RIESGOS?e.canEdit=!0:e.canEdit=!1,e.userInfoJson.rol==Me["q"].AGRICULTOR&&(e.esAgricultor=!0),t.next=7,e.fetchAnalista();case 7:if(e.$route.params.tr_codigo){t.next=24;break}return t.prev=8,t.next=11,fetch("".concat(Me["b"],"plantratamiento/ultimoCodigo"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 11:return n=t.sent,t.next=14,n.json();case 14:a=t.sent,r=a.codigo,e.tratamientoInfoJson.codigo=r,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](8),console.log(t.t0);case 22:t.next=29;break;case 24:return e.showAccionesMitigacion=!0,t.next=27,e.fetchTratamiento();case 27:return t.next=29,e.fetchAccionesMitigacion();case 29:case"end":return t.stop()}}),t,null,[[8,19]])})))()}}),Ae=(n("916a"),n("6b0d")),Se=n.n(Ae);const Re=Se()($e,[["render",je],["__scopeId","data-v-2c408c14"]]);t["default"]=Re},d784:function(e,t,n){"use strict";n("ac1f");var a=n("e330"),r=n("6eeb"),c=n("9263"),o=n("d039"),i=n("b622"),s=n("9112"),u=i("species"),l=RegExp.prototype;e.exports=function(e,t,n,d){var b=i(e),f=!o((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),m=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[b]=/./[b]),n.exec=function(){return t=!0,null},n[b](""),!t}));if(!f||!m||n){var p=a(/./[b]),h=t(b,""[e],(function(e,t,n,r,o){var i=a(e),s=t.exec;return s===c||s===l.exec?f&&!o?{done:!0,value:p(t,n,r)}:{done:!0,value:i(n,t,r)}:{done:!1}}));r(String.prototype,e,h[0]),r(l,b,h[1])}d&&s(l[b],"sham",!0)}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,c=n("1dde"),o=c("map");a({target:"Array",proto:!0,forced:!o},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},db0d:function(e,t,n){},e9c4:function(e,t,n){var a=n("23e7"),r=n("da84"),c=n("d066"),o=n("2ba4"),i=n("e330"),s=n("d039"),u=r.Array,l=c("JSON","stringify"),d=i(/./.exec),b=i("".charAt),f=i("".charCodeAt),m=i("".replace),p=i(1..toString),h=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,j=function(e,t,n){var a=b(n,t-1),r=b(n,t+1);return d(g,e)&&!d(v,r)||d(v,e)&&!d(g,a)?"\\u"+p(f(e,0),16):e},O=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&a({target:"JSON",stat:!0,forced:O},{stringify:function(e,t,n){for(var a=0,r=arguments.length,c=u(r);a<r;a++)c[a]=arguments[a];var i=o(l,null,c);return"string"==typeof i?m(i,h,j):i}})},f464:function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),r=n("14ed"),c=n.n(r),o={class:"header"};function i(e,t,n,r,i,s){return Object(a["G"])(),Object(a["l"])("div",o,[Object(a["m"])("img",{id:"logo",onClick:t[0]||(t[0]=function(t){return e.goToDashboard()}),alt:"logo_banner",src:c.a,width:"120",height:"50"}),Object(a["m"])("p",null,"Bienvenido: "+Object(a["Q"])(e.name+" "+e.lastName),1)])}var s=n("5c40"),u=Object(s["s"])({props:["name","lastName"],methods:{goToDashboard:function(){this.$router.push("/dashboard")}}}),l=(n("a79f"),n("6b0d")),d=n.n(l);const b=d()(u,[["render",i],["__scopeId","data-v-765609f5"]]);t["a"]=b},f50d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("1da1"),r=(n("96cf"),n("d3b7"),n("2fc2"));function c(){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r["b"],"usuario"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}}}]);
//# sourceMappingURL=chunk-21e866cc.2ffc3c74.js.map
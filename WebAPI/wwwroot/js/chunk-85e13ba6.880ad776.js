(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85e13ba6"],{1568:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o=function(e){return Object(r["J"])("data-v-3b6a858f"),e=e(),Object(r["H"])(),e},a=o((function(){return Object(r["m"])("i",{class:"fas fa-chevron-left"},null,-1)})),c=Object(r["o"])(" Salir "),i=[a,c],s={class:"buttons"};function l(e,t,n,o,a,c){var l=Object(r["O"])("confirmation-modal"),u=Object(r["O"])("modal"),d=Object(r["O"])("grid");return Object(r["G"])(),Object(r["l"])(r["b"],null,[Object(r["p"])(l,{error:null,show:e.showModalConfirmation,title:e.modalTitle,massiveDelete:e.massiveDelete,onConfirm:e.confirmDelete,onConfirmMassive:e.confirmMassiveDelete,onCancel:e.closeModal},null,8,["show","title","massiveDelete","onConfirm","onConfirmMassive","onCancel"]),Object(r["p"])(u,{show:!!e.message,title:e.message,onClose:e.handleError,error:e.error,loading:e.loading},null,8,["show","title","onClose","error","loading"]),Object(r["m"])("section",{id:"main",class:Object(r["x"])({expand:e.expand})},[Object(r["m"])("div",null,[Object(r["m"])("h3",{class:"back",onClick:t[0]||(t[0]=function(){return e.goBack&&e.goBack.apply(e,arguments)})},i),Object(r["m"])("h2",null,"ADMINISTRACIÓN DE "+Object(r["Q"])(e.calculateUser()),1),Object(r["m"])("div",s,[Object(r["m"])("button",{class:"action-button",onClick:t[1]||(t[1]=function(t){return e.deleteMassive()})}," Eliminación masiva "),Object(r["m"])("button",{class:"action-button",onClick:t[2]||(t[2]=function(t){return e.register()})},"Registrar")])]),Object(r["p"])(d,{dataSource:e.dataSource,columns:e.columns,config:e.config,actions:e.actions,rows:5,onMovePage:e.movePage,onSelectedList:e.selectedList},null,8,["dataSource","columns","config","actions","onMovePage","onSelectedList"])],2)],64)}var u=n("1da1"),d=(n("96cf"),n("d3b7"),n("99af"),n("3ca3"),n("ddb0"),n("d81d"),n("9fbc")),b=n("b7ff"),f=n("705f"),h=n("2fc2"),m=n("5c40"),p=n("d43e"),j=Object(m["s"])({components:{Grid:d["a"],ConfirmationModal:b["a"],Modal:f["a"]},data:function(){return{profileUrl:"",userRol:"",userInfoJson:null,dataSource:Object(p["a"])(),columns:h["j"],config:{deleteEntity:"",entity:h["o"].USER},actions:[{icon:"fas fa-trash-alt",type:h["d"].DELETE,method:this.delete},{icon:"fas fa-eye",type:h["d"].EDIT,method:this.edit}],modalTitle:"",showModalConfirmation:!1,id:"",entity:"",message:null,loading:!1,error:!1,entityList:[],massiveDelete:!1,expand:!1,page:1,quantity:5}},methods:{movePage:function(e){this.page=e,this.listUsersByRol()},expandMain:function(e){this.expand=!e},selectedList:function(e){this.entityList=e},handleError:function(){this.message=null},closeModal:function(){this.showModalConfirmation=!1},calculateUser:function(){switch(console.log(this.$route),this.$route.path){case"/dashboard/agricultores":this.userRol="AGRICULTORES",this.profileUrl="/dashboard/profile/agricultor/";break;case"/dashboard/analistas":this.userRol="ANALISTAS",this.profileUrl="/dashboard/profile/analista/";break;case"/dashboard/jefe-de-riesgos":this.userRol="JEFE DE RIESGOS",this.profileUrl="/dashboard/profile/jefe-de-riesgos/",this.columns=h["k"];break;case"/dashboard/lista-especialistas":this.userRol="ESPECIALISTAS",this.profileUrl="/dashboard/profile/especialista/",this.columns=h["k"];break}return this.userRol},goBack:function(){this.$router.back()},listUsersByRol:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(h["b"],"usuario/listar/").concat(e.userRol,"?page=").concat(e.page,"&quantity=").concat(e.quantity),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:e.dataSource=t.sent,console.log("this.dataSource"),console.log(e.dataSource),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteMassive:function(){this.entityList.length>0?(this.massiveDelete=!0,this.showModalConfirmation=!0,this.modalTitle="¿Está seguro que desea eliminar los usuarios seleccionados?"):(this.message="Debe seleccionar al menos un usuario",this.error=!0),this.page=1},register:function(){this.$router.push(this.profileUrl)},edit:function(e,t,n){n===h["o"].USER&&this.$router.push(this.profileUrl+e)},delete:function(e,t,n){this.id=e,this.entity=n,this.modalTitle="¿Está seguro que desea eliminar el "+n+"?",this.showModalConfirmation=!0,this.page=1},confirmMassiveDelete:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.entityList),t.next=3,Promise.all(e.entityList.map(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h["b"],"usuario/").concat(t),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 3:e.massiveDelete=!1,e.showModalConfirmation=!1,e.modalTitle="",e.message="Los usuarios  fueron eliminados",setTimeout(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3);case 8:case"end":return t.stop()}}),t)})))()},confirmDelete:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.closeModal(),t.prev=1,t.next=4,fetch("".concat(h["b"]).concat(e.entity,"/").concat(e.id),{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 4:t.sent,e.message="El ".concat(e.entity," fue eliminado"),e.id="",e.entity="",setTimeout(Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.listUsersByRol();case 2:e.message=null;case 3:case"end":return t.stop()}}),t)}))),2e3),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},mounted:function(){var e=this;Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(h["b"],"usuario"),{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,e.userInfoJson=r,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:return t.next=15,e.listUsersByRol();case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}),O=(n("23df"),n("6b0d")),g=n.n(O);const v=g()(j,[["render",l],["__scopeId","data-v-3b6a858f"]]);t["default"]=v},"1fb9":function(e,t,n){},"23df":function(e,t,n){"use strict";n("8c6a")},"38b4":function(e,t,n){"use strict";n("1fb9")},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),o=n("1d80"),a=n("577e"),c=n("5899"),i=r("".replace),s="["+c+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e){return function(t){var n=a(o(t));return 1&e&&(n=i(n,l,"")),2&e&&(n=i(n,u,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},"5ef3":function(e,t,n){},"682b":function(e,t,n){"use strict";function r(e){var t=new Date(e),n=Date.now()-t.getTime(),r=new Date(n);return Math.abs(r.getUTCFullYear()-1970)}n.d(t,"a",(function(){return r}))},7156:function(e,t,n){var r=n("1626"),o=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var c,i;return a&&r(c=t.constructor)&&c!==n&&o(i=c.prototype)&&i!==n.prototype&&a(e,i),e}},"8c6a":function(e,t,n){},"9fbc":function(e,t,n){"use strict";var r=n("7a23"),o=function(e){return Object(r["J"])("data-v-30baf8dd"),e=e(),Object(r["H"])(),e},a={class:"grid"},c={key:0},i={key:1},s={key:0},l=o((function(){return Object(r["m"])("br",null,null,-1)})),u={key:0},d={key:1,class:"no-data"},b={key:0},f=["id","value"],h={key:1},m=["onClick"],p={key:0},j=["onClick"];function O(e,t,n,o,O,g){var v,y,k;return Object(r["G"])(),Object(r["l"])(r["b"],null,[Object(r["m"])("table",a,[Object(r["m"])("thead",{class:Object(r["x"])(e.rowHeaderStyle?"".concat(e.rowHeaderStyle," header-grid"):"header-grid")},[Object(r["m"])("tr",null,[(null===(v=e.actions)||void 0===v?void 0:v.length)>0&&"delete"==e.actions[0].type&&e.dataSource.listaRecords.length>0?(Object(r["G"])(),Object(r["l"])("th",c,[Object(r["ab"])(Object(r["m"])("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.massiveCheck=t})},null,512),[[r["S"],e.massiveCheck]])])):Object(r["k"])("",!0),(Object(r["G"])(!0),Object(r["l"])(r["b"],null,Object(r["M"])(e.columns,(function(e){return Object(r["G"])(),Object(r["l"])("th",{key:e.field,style:Object(r["y"])({textAlign:e.align?e.align:"left"})},Object(r["Q"])(e.title),5)})),128)),(null===(y=e.actions)||void 0===y?void 0:y.length)>0?(Object(r["G"])(),Object(r["l"])("th",i,"Acciones")):Object(r["k"])("",!0)])],2),e.dataSource.listaRecords&&0===(null===(k=e.dataSource.listaRecords)||void 0===k?void 0:k.length)?(Object(r["G"])(),Object(r["l"])("div",s,[l,e.rowBodyStyle?(Object(r["G"])(),Object(r["l"])("p",d,"Sin registros")):(Object(r["G"])(),Object(r["l"])("h3",u,"No hay datos registrados"))])):Object(r["k"])("",!0),Object(r["m"])("tbody",{class:Object(r["x"])(e.rowBodyStyle?e.rowBodyStyle:"")},[(Object(r["G"])(!0),Object(r["l"])(r["b"],null,Object(r["M"])(e.rows,(function(n,o){var a,c;return Object(r["G"])(),Object(r["l"])("tr",{key:n},[(null===(a=e.actions)||void 0===a?void 0:a.length)>0&&"delete"==e.actions[0].type&&e.dataSource.listaRecords.length>0?(Object(r["G"])(),Object(r["l"])("td",b,[e.dataSource.listaRecords&&e.dataSource.listaRecords[o]?Object(r["ab"])((Object(r["G"])(),Object(r["l"])("input",{key:0,type:"checkbox",id:e.dataSource.listaRecords[o].id,value:e.dataSource.listaRecords[o].id,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.checkedEntities=t})},null,8,f)),[[r["S"],e.checkedEntities]]):Object(r["k"])("",!0)])):Object(r["k"])("",!0),(Object(r["G"])(!0),Object(r["l"])(r["b"],null,Object(r["M"])(e.columns,(function(t){return Object(r["G"])(),Object(r["l"])("td",{key:t.field},[Object(r["m"])("p",{style:Object(r["y"])({textAlign:t.align?t.align:"left"})},Object(r["Q"])(e.getValue(t.field,e.dataSource.listaRecords,n-1,t.type)),5)])})),128)),(null===(c=e.actions)||void 0===c?void 0:c.length)>0?(Object(r["G"])(),Object(r["l"])("td",h,[(Object(r["G"])(!0),Object(r["l"])(r["b"],null,Object(r["M"])(e.actions,(function(t){return Object(r["G"])(),Object(r["l"])("span",{key:t.type},[e.dataSource.listaRecords[o]?(Object(r["G"])(),Object(r["l"])("i",{key:0,class:Object(r["x"])(t.icon),style:{"margin-left":"18px"},onClick:function(n){return t.method(e.dataSource.listaRecords[o].id,e.dataSource.listaRecords[o].codigo,e.dataSource.listaRecords[o].entity)}},null,10,m)):Object(r["k"])("",!0)])})),128))])):Object(r["k"])("",!0)])})),128))],2)]),e.dataSource.numeroPaginas>1?(Object(r["G"])(),Object(r["l"])("div",p,[(Object(r["G"])(!0),Object(r["l"])(r["b"],null,Object(r["M"])(e.dataSource.numeroPaginas,(function(t){return Object(r["G"])(),Object(r["l"])("div",{key:t,class:"pageButton",onClick:function(n){return e.goPage(t)}},Object(r["Q"])(t),9,j)})),128))])):Object(r["k"])("",!0)],64)}n("a9e3"),n("d81d");var g=n("682b"),v=n("5c40"),y=n("d4ec"),k=function e(t,n,r){Object(y["a"])(this,e),this.listaRecords=t,this.numeroPaginas=n,this.totalRecords=r},w=Object(v["s"])({props:{columns:{type:Array,required:!0},dataSource:{type:k,required:!0},config:{type:null,required:!1},actions:{type:null,required:!1,default:[]},method:{type:Function,required:!1},rows:{type:Number,required:!1,default:5},pages:{type:Number,required:!0},rowHeaderStyle:{type:String,required:!1},rowBodyStyle:{type:String,required:!1}},emits:["selectedList","movePage"],data:function(){return{massiveCheck:!1,checkedEntities:[]}},watch:{massiveCheck:function(){this.massiveCheck?this.checkedEntities=this.dataSource.listaRecords.map((function(e){return e.id})):this.checkedEntities=[]},checkedEntities:function(){this.$emit("selectedList",this.checkedEntities)}},methods:{goPage:function(e){this.$emit("movePage",e)},getValue:function(e,t,n,r){if(t)return t[n]?"fechaNacimiento"===e?Object(g["a"])(t[n][e]):"date"===r?new Date(t[n][e]).toLocaleDateString():t[n][e]:""}}}),S=(n("38b4"),n("6b0d")),R=n.n(S);const E=R()(w,[["render",O],["__scopeId","data-v-30baf8dd"]]);t["a"]=E},a9e3:function(e,t,n){"use strict";var r=n("83ab"),o=n("da84"),a=n("e330"),c=n("94ca"),i=n("6eeb"),s=n("1a2d"),l=n("7156"),u=n("3a9b"),d=n("d9b5"),b=n("c04e"),f=n("d039"),h=n("241c").f,m=n("06cf").f,p=n("9bf2").f,j=n("408a"),O=n("58a8").trim,g="Number",v=o[g],y=v.prototype,k=o.TypeError,w=a("".slice),S=a("".charCodeAt),R=function(e){var t=b(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,n,r,o,a,c,i,s,l=b(e,"number");if(d(l))throw k("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=O(l),t=S(l,0),43===t||45===t){if(n=S(l,2),88===n||120===n)return NaN}else if(48===t){switch(S(l,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+l}for(a=w(l,2),c=a.length,i=0;i<c;i++)if(s=S(a,i),s<48||s>o)return NaN;return parseInt(a,r)}return+l};if(c(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,C=function(e){var t=arguments.length<1?0:v(R(e)),n=this;return u(y,n)&&f((function(){j(n)}))?l(Object(t),n,C):t},I=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;I.length>M;M++)s(v,x=I[M])&&!s(C,x)&&p(C,x,m(v,x));C.prototype=y,y.constructor=C,i(o,g,C)}},aa14:function(e,t,n){"use strict";n("5ef3")},b7ff:function(e,t,n){"use strict";var r=n("7a23"),o=function(e){return Object(r["J"])("data-v-ea440b04"),e=e(),Object(r["H"])(),e},a={key:0,class:"modal"},c=o((function(){return Object(r["m"])("i",{class:"far fa-times-circle fa-2x"},null,-1)})),i={class:"flex-button"};function s(e,t,n,o,s,l){var u=Object(r["O"])("backdrop");return Object(r["G"])(),Object(r["l"])(r["b"],null,[Object(r["p"])(u,{show:e.show,onClose:e.tryClose,closable:!1},null,8,["show","onClose"]),e.show?(Object(r["G"])(),Object(r["l"])("div",a,[c,Object(r["m"])("p",null,Object(r["Q"])(e.title),1),Object(r["m"])("div",i,[Object(r["m"])("button",{onClick:t[0]||(t[0]=function(t){return e.confirm()}),class:"action-button"},"Aceptar"),Object(r["m"])("button",{style:{background:"var(--danger)"},onClick:t[1]||(t[1]=function(t){return e.cancel()}),class:"action-button"}," Cancelar ")])])):Object(r["k"])("",!0)],64)}var l=n("5c40"),u=n("c2de"),d=Object(l["s"])({components:{Backdrop:u["a"]},props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},error:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},massiveDelete:{type:Boolean,required:!1}},emits:["confirmMassive","close","confirm","cancel"],methods:{tryClose:function(){this.$emit("close")},confirm:function(){this.massiveDelete?this.$emit("confirmMassive"):this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}}),b=(n("aa14"),n("6b0d")),f=n.n(b);const h=f()(d,[["render",s],["__scopeId","data-v-ea440b04"]]);t["a"]=h},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,a=n("1dde"),c=a("map");r({target:"Array",proto:!0,forced:!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-85e13ba6.880ad776.js.map